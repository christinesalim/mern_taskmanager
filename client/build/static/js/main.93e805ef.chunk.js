(this["webpackJsonptask-manager-gui"]=this["webpackJsonptask-manager-gui"]||[]).push([[0],{265:function(e,t,a){},288:function(e,t,a){},292:function(e,t,a){},293:function(e,t,a){},294:function(e,t,a){},295:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(62),r=a.n(s),c=a(236),o=(a(264),a(265),a(20)),i=a(126),l=a(25),u=a(18),d=a.n(u),p=a(33),j=a(69),b=a(14),f=a(37),g=a(346),h=a(47),O=a(64),m=a(41),v=Object(m.a)(),k="SIGN_IN",x="SIGN_OUT",y="LOAD_USER",S="CREATE_TASK",T="DELETE_TASK",E="EDIT_TASK",w="FETCH_TASKS",N="UPLOAD_AVATAR_COMPLETED",C="GET_AVATAR_RESPONSE_RECEIVED",A="DELETED_AVATAR_FILE",_="UPLOAD_AVATAR_REQ_RECEIVED",I="UPLOAD_AVATAR_ERROR",R="GET_AVATAR_ERROR",D=a(237),U=a.n(D).a.create({baseURL:"https://csalim-mern-taskmanager.herokuapp.com/"});U.interceptors.request.use((function(e){return localStorage.getItem("taskmanager")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("taskmanager")).jwtToken)),e}));var P=function(e){return U.post("/users",e)},F=function(e){return U.post("/users/login",e)},L=function(e){return console.log("Sending google token to backend",e),U.post("/users/googlelogin",e)},M=function(e){return console.log("Sending request to create task"),U.post("/tasks",e)},V=function(e,t){return console.log("Sending request to edit the task"),U.patch("/tasks/".concat(e),t)},G=function(e){return console.log("Sending delete task request"),U.delete("/tasks/".concat(e))},H=function(e){return console.log("Sending avatar file request"),U.post("/users/me/avatar",e,{headers:{"Content-Type":"multipart/form-data"}})},z=function(e){return U.get("/users/".concat(e,"/avatar"),{responseType:"blob"})},K=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L(e);case 3:n=t.sent,s=n.data,console.log("Google login data",s),a({type:k,payload:s}),v.push("/taskmanager"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z(e);case 3:n=t.sent,s=URL.createObjectURL(n.data),a({type:C,payload:s}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),a({type:R,payload:{data:null===t.t0||void 0===t.t0?void 0:t.t0.response.data,status:null===t.t0||void 0===t.t0?void 0:t.t0.response.status}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},B=a(238),J=(a(288),a(7)),Q={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},W=function(){var e=Object(o.c)(),t=Object(n.useState)(Q),a=Object(f.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)({}),i=Object(f.a)(c,2),l=i[0],u=i[1],m=Object(n.useState)(!1),x=Object(f.a)(m,2),y=x[0],S=x[1],T=Object(n.useState)(!1),E=Object(f.a)(T,2),w=E[0],N=E[1],C=Object(n.useState)(!1),A=Object(f.a)(C,2),_=A[0],I=A[1],R=function(e){r(Object(b.a)(Object(b.a)({},s),{},Object(j.a)({},e.target.name,e.target.value)))},D=Object(n.useCallback)((function(){var t;e(y?(t=s,function(){var e=Object(p.a)(d.a.mark((function e(a){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("In signUp action creator",t),e.next=4,P(t);case 4:n=e.sent,s=n.data,a({type:k,payload:s}),v.push("/taskmanager"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()):function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F(e);case 3:n=t.sent,s=n.data,console.log("Sign in ",s),a({type:k,payload:s}),v.push("/taskmanager"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(s))}),[s,y,e]);Object(n.useEffect)((function(){_&&0===Object.keys(l).length&&(console.log("isSubmitting",_),D())}),[l,_,D]);var U=function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=null===a||void 0===a?void 0:a.tokenId;try{e(K({token:n}))}catch(s){console.log(s)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L="".concat(w?"input":"password");return console.log("Before return formdata",s),Object(J.jsx)("div",{className:"SignUp ",children:Object(J.jsxs)(g.a,{children:[y&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(g.a.Field,{children:Object(J.jsx)(g.a.Input,{id:"firstName",name:"firstName",type:"text",placeholder:"First Name",error:l.firstName?{content:l.firstName,pointing:"below"}:null,value:s.firstName,onChange:R})}),Object(J.jsx)(g.a.Input,{id:"lastName",name:"lastName",type:"text",placeholder:"Last Name",error:l.lastName?{content:l.lastName,pointing:"below"}:null,value:s.lastName,onChange:R}),Object(J.jsx)(g.a.Field,{})]}),Object(J.jsx)(g.a.Field,{children:Object(J.jsx)(g.a.Input,{className:"ui input email",id:"email",name:"email",type:"text",placeholder:"Email",error:l.email?{content:l.email,pointing:"right"}:null,value:s.email,onChange:R})}),Object(J.jsx)(g.a.Field,{children:Object(J.jsx)(g.a.Input,{icon:Object(J.jsx)(h.a,{name:w?"eye slash":"eye",link:!0,onClick:function(){N(!w)}}),id:"password",name:"password",type:L,onChange:R,error:l.password?{content:l.password,pointing:"below"}:null,placeholder:"Password",value:s.password})}),y&&Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(g.a.Field,{children:Object(J.jsx)(g.a.Input,{id:"confirmPassword",name:"confirmPassword",type:L,onChange:R,error:l.confirmPassword?{content:l.confirmPassword,pointing:"below"}:null,placeholder:"Confirm Password",value:s.confirmPassword})})}),Object(J.jsx)("div",{className:"SignUp-SignUpButton",children:Object(J.jsx)(O.a,{className:"fluid ui button",type:"submit",onClick:function(e){e.preventDefault(),u(function(){console.log("validateForm: isSubmitting",_);var e={};return y&&(s.firstName||(e.firstName="Please enter a first name"),s.lastName||(e.lastName="Please enter a last name"),(!s.confirmPassword||s.confirmPassword.length<8)&&(e.confirmPassword="Password must be at least 8 characters"),s.password!==s.confirmPassword&&(e.confirmPassword="Passwords must match")),s.email?/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i.test(s.email)||(e.email="Please enter a valid email"):e.email="Please enter an email",(!s.password||s.password.length<8)&&(e.password="Password must be at least 8 characters"),e}()),I(!0)},children:y?"Sign Up":"Sign In"})}),Object(J.jsx)("div",{className:"ui horizontal divider",children:"Or"}),Object(J.jsxs)("div",{className:"SignUp-SignInButton",children:[Object(J.jsx)(B.GoogleLogin,{clientId:"202556023160-uglkeodct8n1ctvrotf5pn4v2nomshdl.apps.googleusercontent.com",render:function(e){return Object(J.jsxs)(O.a,{className:"ui google button primary",onClick:e.onClick,children:[Object(J.jsx)("i",{className:"google icon"}),"Google Sign In"]})},onSuccess:U,onFailure:function(e){console.log("Google error: ",e),alert("Google Sign In was unsuccessful. Try again later")},cookiePolicy:"single_host_origin"}),Object(J.jsx)(O.a,{onClick:function(){console.log("switchmode"),r({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),S((function(e){return!e})),N(!1),I(!1),u({})},className:"ui basic button",children:y?"Already have an account? Sign in":"Don't have an account? Sign Up"})]})]})})},X=a(241),$=a(154),Y=a(350),Z=a(347),ee=a(244),te=(a(292),a.p+"static/media/blank-profile-picture.2fda6558.png"),ae=a(90),ne=a(240),se=function(){var e=Object(o.c)(),t=Object(n.useState)(null),a=Object(f.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)("Upload an image for your profile"),i=Object(f.a)(c,2),l=i[0],u=i[1],j=Object(n.useState)(""),b=Object(f.a)(j,2),h=b[0],m=b[1],v=Object(o.d)((function(e){return e.avatar.uploadStatus})),k=Object(o.d)((function(e){return e.avatar.fileName}));Object(n.useEffect)((function(){console.log("New upload status: ",v),200===v?r(null):m(400===v?"Sorry, the file upload had a problem":"")}),[v,k]),Object(n.useEffect)((function(){k||u("Upload an image for your profile")}),[k]);return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(g.a,{children:[Object(J.jsx)(ae.a,{children:l}),Object(J.jsx)(ne.InputFile,{input:{id:"avatar-file-id",onChange:function(e){var t;(console.log("Upload this file",e.target.files),function(e){var t=e.target.files[0];return!((null===t||void 0===t?void 0:t.size)>5e5)}(e))?(r(e.target.files[0]),u(null===(t=e.target.files[0])||void 0===t?void 0:t.name),console.log("file name",l),m("Click the Upload button to begin upload.")):(r(null),u("Upload an image for your profile:"),m("File too large. Please select a smaller file to upload"))}}}),s&&Object(J.jsx)(O.a,{primary:!0,onClick:function(t){console.log("uploading file",null===s||void 0===s?void 0:s.name),m("");var a=new FormData;a.append("avatar",s),e(function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:_,payload:e}),a.next=4,H(t);case 4:s=a.sent,console.log("Response to avatar upload: ",s),n({type:N,payload:s.status}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("Error",a.t0.message),n({type:I,payload:a.t0});case 13:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(l,a))},children:"Upload"})]}),Object(J.jsx)("p",{children:h})]})},re=function(){var e,t=Object(o.c)(),a=Object(o.d)((function(e){return e.auth.isSignedIn})),s=Object(o.d)((function(e){return e.auth.userData})),r=Object(o.d)((function(e){return e.avatar})),c=Object(n.useRef)(null===r||void 0===r?void 0:r.file),i=Object(n.useState)(!1),l=Object(f.a)(i,2),u=l[0],j=l[1],b=Object(n.useCallback)((function(){t(q(s.user._id))}),[null===s||void 0===s?void 0:s.user._id,t]);Object(n.useEffect)((function(){s&&(console.log("User data changed. Getting avatar for this user"),b())}),[s,b]);var g=Object(n.useCallback)((function(){console.log("*****Avatar was uploaded. Get avatar for this user"),t(q(s.user._id))}),[null===s||void 0===s?void 0:s.user._id,t]);Object(n.useEffect)((function(){c.current=r.file})),Object(n.useEffect)((function(){var e=c.current;return s&&r.fileUploaded&&(console.log("Sending request to get user's avatar"),g()),function(){console.log("revokeObjectURL",e),URL.revokeObjectURL(e)}}),[s,null===r||void 0===r?void 0:r.fileUploaded,g]);var O=function(){console.log("Delete the profile"),t(function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.delete("/users/me/avatar");case 3:a=e.sent,t({type:A,payload:a.status}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())};return Object(J.jsxs)("div",{className:"Home",children:[a&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("h1",{className:"Home-h1",children:["Welcome ",null===s||void 0===s||null===(e=s.user)||void 0===e?void 0:e.firstName,"!"]}),Object(J.jsx)(X.a,{divided:"vertically",children:Object(J.jsxs)(X.a.Row,{columns:2,children:[Object(J.jsx)(X.a.Column,{width:2,children:r.file?Object(J.jsxs)("div",{className:"Home-Icons",children:[Object(J.jsx)($.a,{size:"tiny",src:r.file,alt:"avatar"}),Object(J.jsx)(Y.a,{content:"Delete avatar",trigger:Object(J.jsx)(h.a,{size:"large",link:!0,name:"delete",onClick:function(){j(!0)}})}),Object(J.jsx)(Z.a,{className:"Home-Modal",open:u,header:"Do you want to delete your avatar image?",onCancel:function(){j(!1)},onConfirm:function(){O(),j(!1)}})]}):Object(J.jsxs)(ee.a,{children:[" ",Object(J.jsx)(ee.a.Image,{size:"small",src:te,alt:"no avatar",circular:!0})]})}),Object(J.jsx)(X.a.Column,{width:6,children:Object(J.jsx)(se,{id:null===s||void 0===s?void 0:s.user._id})})]})})]}),!a&&Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(W,{})}),Object(J.jsxs)("p",{className:"Home-Footer",children:["\xa9"," Christine S. 2021. Built with MongoDB, Express, React and Node.js"]})]})},ce=a(349),oe=a(348),ie=a(199),le=a(200),ue=a(51),de=a(203),pe=a(201),je=a(218),be=(a(293),function(e){Object(de.a)(a,e);var t=Object(pe.a)(a);function a(e){var n;return Object(ie.a)(this,a),(n=t.call(this,e)).handleDelete=n.handleDelete.bind(Object(ue.a)(n)),n.handleChange=n.handleChange.bind(Object(ue.a)(n)),n.handleEdit=n.handleEdit.bind(Object(ue.a)(n)),n.handleTaskUpdate=n.handleTaskUpdate.bind(Object(ue.a)(n)),n.handleCompleted=n.handleCompleted.bind(Object(ue.a)(n)),n.toggleForm=n.toggleForm.bind(Object(ue.a)(n)),n.state={description:n.props.description,isEditing:!1},n}return Object(le.a)(a,[{key:"handleDelete",value:function(){this.props.deleteTask(this.props.id)}},{key:"handleEdit",value:function(){this.toggleForm()}},{key:"toggleForm",value:function(){this.setState({isEditing:!this.state.isEditing})}},{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleTaskUpdate",value:function(){var e={description:this.state.description,completed:this.props.completed};console.log("Task component handleTaskUpdate: ",e),this.props.editTask(this.props.id,e),this.toggleForm()}},{key:"handleCompleted",value:function(){console.log("Completed clicked");var e={description:this.state.description,completed:!this.props.completed};this.props.editTask(this.props.id,e)}},{key:"render",value:function(){return this.state.isEditing?Object(J.jsx)("div",{children:Object(J.jsxs)(g.a,{onSubmit:this.handleTaskUpdate,className:"Task-edit-form",children:[Object(J.jsx)(g.a.Input,{className:"Task-edit-input",value:this.state.description,onChange:this.handleChange,name:"description"}),Object(J.jsx)("div",{className:"Task-save-button",children:Object(J.jsx)(O.a,{size:"mini",icon:!0,type:"submit",children:Object(J.jsx)(h.a,{name:"save"})})})]})}):Object(J.jsx)("div",{className:"Task",children:Object(J.jsxs)(ce.a.Item,{className:"Task-li ".concat(this.props.completed?"Task-completed":""," "),children:[Object(J.jsx)(je.a,{className:"Task-checkbox",checked:this.props.completed,onClick:this.handleCompleted}),this.state.description,Object(J.jsxs)("div",{className:"Task-buttons",children:[Object(J.jsx)(O.a,{size:"mini",icon:!0,onClick:this.handleEdit,children:Object(J.jsx)(h.a,{name:"edit"})}),Object(J.jsx)(O.a,{size:"mini",icon:!0,onClick:this.handleDelete,children:Object(J.jsx)(h.a,{name:"trash"})})]})]})})}}]),a}(n.Component)),fe=Object(o.b)(null,{editTask:function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("Editing task in database",t),a.next=4,V(e,t);case 4:s=a.sent,console.log("In editTask action response received:",s),n({type:E,payload:s.data}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},deleteTask:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G(e);case 3:n=t.sent,a({type:T,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(be),ge=(a(294),function(e){Object(de.a)(a,e);var t=Object(pe.a)(a);function a(e){var n;return Object(ie.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.props.createTask(Object(b.a)(Object(b.a)({},n.state),{},{completed:!1})),n.setState({description:""});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={description:""},n.handleChange=n.handleChange.bind(Object(ue.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(ue.a)(n)),n}return Object(le.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return Object(J.jsx)(g.a,{onSubmit:this.handleSubmit,children:Object(J.jsxs)("div",{className:"TaskCreateForm",children:[Object(J.jsx)(g.a.Input,{className:"TaskCreateForm-input",label:"New Task",id:"description",name:"description",type:"text",value:this.state.description,onChange:this.handleChange}),Object(J.jsx)(O.a,{className:"TaskCreateForm-submit",type:"submit",value:"Submit",disabled:!this.state.description,children:"Add"})]})})}}]),a}(n.Component)),he=Object(o.b)(null,{createTask:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Adding task to database"),t.next=4,M(e);case 4:n=t.sent,console.log("Create task response",n),a({type:S,payload:n.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})(ge),Oe=(a(295),function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.auth.userData})),a=Object(o.d)((function(e){return e.auth.isSignedIn})),s=Object(o.d)((function(e){return e.tasks.tasks})),r=Object(o.d)((function(e){return e.avatar})),c=Object(n.useState)([]),i=Object(f.a)(c,2),l=i[0],u=i[1],j=Object(n.useState)([]),g=Object(f.a)(j,2),h=g[0],O=g[1],m=Object(n.useRef)(!1);console.log("****TaskManager: user",t);var v=Object(n.useCallback)((function(){console.log("***getAvatar() for user",null===t||void 0===t?void 0:t.user._id),e(q(null===t||void 0===t?void 0:t.user._id))}),[null===t||void 0===t?void 0:t.user._id,e]);Object(n.useEffect)((function(){console.log("****TaskManager: databaseAvatarInfo",r),!(null===r||void 0===r?void 0:r.file)&&t?(console.log("****TaskManager Getting avatar for this user"),v()):console.log("Already have file",r.file)}),[t]);var k=Object(n.useCallback)((function(){e(function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("About to fetch tasks"),e.next=4,console.log("Sending request to fetch tasks"),U.get("/tasks");case 4:a=e.sent,console.log("Fetched tasks",a),t({type:w,payload:a.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),x=Object(n.useCallback)((function(){var e=function(e){var t=l.map((function(t){return t.id===e?Object(b.a)(Object(b.a)({},t),{},{completed:!t.completed}):t}));u(t)};if(l)return l.map((function(t){return Object(J.jsx)(fe,{className:"TaskManager-Task",id:t._id,description:t.description,completed:t.completed,toggleCompleted:e},t._id)}))}),[l]);return Object(n.useEffect)((function(){console.log("Task Manager useEffect prevSignedInStatus",m),!m.current&&a&&(console.log("TaskManager useEffect: user is NOW signed in! Fetching tasks"),k()),m.current=a,console.log("Task Manager useEffect UPDATING prevSignedInStatus",m)}),[a,k]),Object(n.useEffect)((function(){u(s);var e=x(s);console.log("TaskManager useEffect tasksToDisplay:",e),O(e)}),[s,x]),Object(J.jsx)("div",{children:t?Object(J.jsx)(J.Fragment,{children:Object(J.jsxs)("div",{className:"TaskManager",children:[Object(J.jsxs)("div",{className:"TaskManager-Heading",children:[r.file?Object(J.jsx)($.a,{src:r.file,alt:"avatar",avatar:!0}):Object(J.jsx)($.a,{src:te,alt:"no avatar",avatar:!0}),Object(J.jsx)("span",{className:"TaskManager-Title",children:"My Tasks"})]}),Object(J.jsx)(ce.a,{children:h}),Object(J.jsx)(he,{})]})}):Object(J.jsx)(oe.a,{children:"Please log in or sign up to view and manage your tasks."})})}),me=a(151),ve=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.auth.isSignedIn})),a=Object(o.d)((function(e){return e.auth.userData}));console.log("Header User logged in is: ",a),console.log("Header isSignedIn",t),Object(n.useEffect)((function(){console.log("Header dispatching loadUser"),e({type:y})}),[e]);return Object(J.jsxs)("div",{className:"ui secondary pointing menu",children:[Object(J.jsx)(me.a,{to:"/",className:"item",children:"TaskManager"}),Object(J.jsxs)("div",{className:"right menu",children:[Object(J.jsx)(me.a,{to:"/taskmanager",className:"item",children:"All Tasks"}),t?Object(J.jsx)(O.a,{secondary:!0,onClick:function(){if(t)try{console.log("Header signing out user"),e(function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Action creator: Signing out user"),e.next=3,console.log("Signing out user on backend"),U.post("/users/logout");case 3:t({type:x}),v.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a)}},children:"Sign Out"}):Object(J.jsx)(O.a,{as:me.a,to:"/auth",primary:!0,children:"Log In"})]})]})};var ke=function(){return Object(J.jsx)("div",{className:"ui container",children:Object(J.jsx)(l.b,{history:v,children:Object(J.jsxs)("div",{children:[Object(J.jsx)(ve,{}),Object(J.jsx)(l.a,{path:"/",exact:!0,component:re}),Object(J.jsx)(l.a,{path:"/auth",exact:!0,component:W}),Object(J.jsx)(l.a,{path:"/taskManager",exact:!0,component:Oe})]})})})},xe={isSignedIn:null,userData:null},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return console.log("authReducer: user signed in successfully"),console.log("Stored user token: ",t.payload.token),localStorage.setItem("taskmanager",JSON.stringify(t.payload)),Object(b.a)(Object(b.a)({},e),{},{isSignedIn:!0,userData:t.payload});case y:console.log("Load user in authReducer");var a=JSON.parse(localStorage.getItem("taskmanager"));return console.log("loaded user",a),e.isSignedIn=!!a,Object(b.a)(Object(b.a)({},e),{},{userData:a});case x:return console.log("Signed out user in authReducer"),localStorage.clear(),Object(b.a)(Object(b.a)({},e),{},{isSignedIn:!1,userData:null});default:return e}},Se=a(245),Te={tasks:null},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return console.log("In CREATE_TASK reducer",t.payload),Object(b.a)(Object(b.a)({},e),{},{tasks:[].concat(Object(Se.a)(e.tasks),[t.payload])});case E:return console.log("In EDIT_TASK reducer",t.payload),Object(b.a)(Object(b.a)({},e),{},{tasks:e.tasks.map((function(e){return e._id===t.payload._id?t.payload:e}))});case T:return console.log("In DELETE_TASK reducer",t.payload),Object(b.a)(Object(b.a)({},e),{},{tasks:e.tasks.filter((function(e){return e._id!==t.payload._id}))});case w:return console.log("In FETCH_TASKS reducer",t.payload),Object(b.a)(Object(b.a)({},e),{},{tasks:t.payload});case x:return console.log("Deleting tasks from signing out"),Object(b.a)(Object(b.a)({},e),{},{tasks:null});default:return e}},we={fileName:null,file:null,fileUploaded:!1,uploadStatus:null,deleteStatus:null,error:null},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return console.log("UPLOAD_AVATAR_REQ_RECEIVED for file",t.payload),Object(b.a)(Object(b.a)({},e),{},{fileName:t.payload,fileUploaded:!1});case N:return console.log("UPLOAD_AVATAR_COMPLETED reducer "),Object(b.a)(Object(b.a)({},e),{},{fileUploaded:!0,uploadStatus:t.payload});case I:return console.log("UPLOAD_AVATAR_ERROR",t.payload),Object(b.a)(Object(b.a)({},e),{},{error:t.payload});case C:return console.log("GET_AVATAR_RESPONSE_RECEIVED reducer ",t.payload),Object(b.a)(Object(b.a)({},e),{},{file:t.payload});case R:return console.log("GET_AVATAR_ERROR",t.payload),Object(b.a)(Object(b.a)({},e),{},{error:t.payload});case A:return Object(b.a)(Object(b.a)({},e),{},{fileName:null,file:null,fileUploaded:!1,deleteStatus:t.playload});default:return e}},Ce=Object(i.b)({auth:ye,tasks:Ee,avatar:Ne}),Ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,_e=Object(i.d)(Ce,Ae(Object(i.a)(c.a)));r.a.render(Object(J.jsx)(o.a,{store:_e,children:Object(J.jsx)(ke,{})}),document.getElementById("root"))}},[[297,1,2]]]);
//# sourceMappingURL=main.93e805ef.chunk.js.map